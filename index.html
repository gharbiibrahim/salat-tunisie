<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ุตูุงุชู - ุชููุณ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#c60c30">
    <link rel="icon" href="assets/icon-192.png">
    <link rel="apple-touch-icon" href="assets/icon-192.png">
</head>

<body>

    <div class="app-container">
        <!-- Header (Shared) -->
        <header>
            <div class="header-content">
                <h1>๐ ุตูุงุชู</h1>
                <p id="fullDate">ุฌุงุฑู ุงูุชุญููู...</p>
            </div>

            <div class="header-tools">
                <button id="muteBtn" class="mute-btn-circle" title="ุชูุนูู/ูุชู ุงูุฃุฐุงู">๐</button>
                <div id="liveClock">00:00:00</div>
            </div>
        </header>

        <!-- Hidden Audio Element -->
        <audio id="adhanAudio" src="assets/adhan.mp3" preload="auto"></audio>

        <!-- Main Views Container -->
        <main id="mainContent">

            <!-- View 1: Dashboard -->
            <section id="view-dashboard" class="app-view active">
                <!-- Location Summary -->
                <div class="glass-card location-summary">
                    <div class="location-info">
                        <span id="displayLocation">๐ ุชููุณ ุงูุนุงุตูุฉ</span>
                        <div class="date-controls">
                            <input type="date" id="mainDateInput" class="main-date-picker">
                            <button id="todayBtn" class="btn-today">ุงูููู</button>
                        </div>
                    </div>
                    <button id="locateBtn" class="btn-icon-label">
                        <span>ุชุญุฏูุซ ุงููููุน</span>
                    </button>
                </div>

                <!-- Main Countdown & Progress Widget -->
                <div class="glass-card progress-card">
                    <div class="main-countdown-wrapper">
                        <div id="mainCountdown" class="big-countdown">--:--:--</div>
                        <div class="next-prayer-title">ุญุชู ุตูุงุฉ <span id="nextPrayerName">...</span></div>
                    </div>

                    <div class="progress-bar-container">
                        <div id="prayerProgressBar" class="progress-bar"></div>
                    </div>

                    <div class="progress-labels">
                        <span id="prevPrayerName">...</span>
                        <span id="progressPercentage">0%</span>
                    </div>
                </div>

                <!-- Prayer List (Directly under progress) -->
                <div class="prayers-list" id="prayerContainer">
                    <div class="prayer-item" id="card-fajr">
                        <div class="prayer-name">ุงููุฌุฑ</div>
                        <div class="prayer-time" id="time-fajr">--:--</div>
                    </div>

                    <div class="prayer-item" id="card-dhuhr">
                        <div class="prayer-name">ุงูุธูุฑ</div>
                        <div class="prayer-time" id="time-dhuhr">--:--</div>
                    </div>

                    <div class="prayer-item" id="card-asr">
                        <div class="prayer-name">ุงูุนุตุฑ</div>
                        <div class="prayer-time" id="time-asr">--:--</div>
                    </div>

                    <div class="prayer-item" id="card-maghrib">
                        <div class="prayer-name">ุงููุบุฑุจ</div>
                        <div class="prayer-time" id="time-maghrib">--:--</div>
                    </div>

                    <div class="prayer-item" id="card-isha">
                        <div class="prayer-name">ุงูุนุดุงุก</div>
                        <div class="prayer-time" id="time-isha">--:--</div>
                    </div>
                </div>

                <!-- Dashboard Content (Solar Info below) -->
                <div class="dashboard-grid">
                    <div class="glass-card solar-panel">
                        <div class="info-row">
                            <span class="info-label">๐ ุงูุดุฑูู</span>
                            <span class="info-value" id="val-sunrise">--:--</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">โ ุงูุฒูุงู</span>
                            <span class="info-value" id="val-noon">--:--</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">๐ ุงูุบุฑูุจ</span>
                            <span class="info-value" id="val-sunset">--:--</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">โฑ๏ธ ุทูู ุงูููุงุฑ</span>
                            <span class="info-value" id="val-daylen">--</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- View 2: Calendar -->
            <section id="view-calendar" class="app-view">
                <div class="glass-card">
                    <div class="calendar-header">
                        <button id="nextMonth" class="month-nav-btn">โถ</button>
                        <div class="month-info">
                            <h3 class="view-title" id="calendarMonthTitle">๐ ุฅูุณุงููุฉ ุงูุดูุฑ</h3>
                            <div id="ramadanBadge" class="ramadan-badge" style="display:none;">
                                ๐ ุดูุฑ ุฑูุถุงู ุงููุจุงุฑู
                            </div>
                        </div>
                        <button id="prevMonth" class="month-nav-btn">โ</button>
                    </div>
                    <div class="calendar-container" id="calendarTable">
                        <p style="text-align:center; padding:20px;">ุฌุงุฑู ุชุฌููุฒ ุงูุฌุฏูู...</p>
                    </div>
                </div>
            </section>

            <!-- View 3: Adhkar -->
            <section id="view-adhkar" class="app-view">
                <div class="glass-card adhkar-container">
                    <h3 class="view-title">๐ฟ ุงูุฃุฐูุงุฑ ูุงูุชุณุงุจูุญ</h3>

                    <!-- Tasbih Counter Quick Tool -->
                    <div class="tasbih-tool">
                        <div class="tasbih-display">
                            <span id="tasbihCount">0</span>
                            <p id="tasbihText">ุณุจุญุงู ุงููู</p>
                        </div>
                        <div class="tasbih-buttons">
                            <button id="tasbihBtn" class="btn-primary">ุงุถุบุท ููุชุณุจูุญ</button>
                            <button id="resetTasbih" class="btn-secondary">ุฅุนุงุฏุฉ</button>
                        </div>
                    </div>

                    <!-- Adhkar Categories -->
                    <div class="adhkar-grid">
                        <div class="adhkar-card">
                            <span class="adhkar-icon">โ๏ธ</span>
                            <h4>ุฃุฐูุงุฑ ุงูุตุจุงุญ</h4>
                            <p>ุชูุฑุฃ ูู ุงููุฌุฑ ุฅูู ุทููุน ุงูุดูุณ</p>
                            <button class="btn-read-adhkar" data-type="sabah">ูุฑุงุกุฉ</button>
                        </div>
                        <div class="adhkar-card">
                            <span class="adhkar-icon">๐</span>
                            <h4>ุฃุฐูุงุฑ ุงููุณุงุก</h4>
                            <p>ุชูุฑุฃ ูู ุงูุนุตุฑ ุฅูู ุบุฑูุจ ุงูุดูุณ</p>
                            <button class="btn-read-adhkar" data-type="masaa">ูุฑุงุกุฉ</button>
                        </div>
                        <div class="adhkar-card">
                            <span class="adhkar-icon">๐</span>
                            <h4>ุฃุฐูุงุฑ ุงูุตูุงุฉ</h4>
                            <p>ุชูุฑุฃ ูุจุงุดุฑุฉ ุจุนุฏ ุงูุชุณููู</p>
                            <button class="btn-read-adhkar" data-type="prayer">ูุฑุงุกุฉ</button>
                        </div>
                        <div class="adhkar-card">
                            <span class="adhkar-icon">๐ค</span>
                            <h4>ุฃุฐูุงุฑ ุงูููู</h4>
                            <p>ุชูุฑุฃ ูุจู ุงูููู ูุจุงุดุฑุฉ</p>
                            <button class="btn-read-adhkar" data-type="sleep">ูุฑุงุกุฉ</button>
                        </div>
                    </div>
                </div>

                <!-- Adhkar Reading Modal/Panel (Hidden by default) -->
                <div id="adhkarModal" class="adhkar-modal hidden">
                    <div class="modal-content glass-card">
                        <button id="closeAdhkar" class="close-btn">&times;</button>
                        <h2 id="modalTitle">ุฃุฐูุงุฑ ุงูุตุจุงุญ</h2>
                        <div id="adhkarList" class="adhkar-list">
                            <!-- Dynamically populated -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- View 4: Settings -->
            <section id="view-settings" class="app-view">
                <div class="glass-card">
                    <h3 class="view-title">โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h3>

                    <div class="settings-list">
                        <!-- Location Settings -->
                        <div class="settings-section">
                            <h4 class="section-title">๐ ุงููููุน</h4>
                            <div class="setting-item">
                                <label>ุฎุท ุงูุนุฑุถ (Lat)</label>
                                <input type="number" id="lat" value="37.0400" step="0.0001" class="control-input">
                            </div>
                            <div class="setting-item">
                                <label>ุฎุท ุงูุทูู (Long)</label>
                                <input type="number" id="lng" value="9.6650" step="0.0001" class="control-input">
                            </div>
                        </div>

                        <!-- Theme Settings -->
                        <div class="settings-section">
                            <h4 class="section-title">๐จ ุงููุธูุฑ</h4>
                            <div class="setting-item">
                                <label>ุงููุถุน ุงููููู</label>
                                <label class="switch">
                                    <input type="checkbox" id="darkModeToggle">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="settings-actions">
                            <button id="saveSettings" class="btn-primary">
                                ๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                            </button>
                            <button id="resetSettings" class="btn-secondary">
                                ๐ ุฅุนุงุฏุฉ ุชุนููู
                            </button>
                        </div>

                        <p class="settings-note">
                            ๐ก ุณูุชู ุญูุธ ุฅุนุฏุงุฏุงุชู ุชููุงุฆูุงู ูู ุงููุชุตูุญ
                        </p>
                    </div>
                </div>
            </section>

        </main>

        <!-- Bottom Navigation Bar -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-view="view-dashboard">
                <span class="nav-icon">๐</span>
                <span class="nav-label">ุงูุฑุฆูุณูุฉ</span>
            </button>
            <button class="nav-item" data-view="view-calendar">
                <span class="nav-icon">๐</span>
                <span class="nav-label">ุงูุชูููู</span>
            </button>
            <button class="nav-item" data-view="view-qibla">
                <span class="nav-icon">๐</span>
                <span class="nav-label">ุงููุจูุฉ</span>
            </button>
            <button class="nav-item" data-view="view-settings">
                <span class="nav-icon">โ๏ธ</span>
                <span class="nav-label">ุงูุฅุนุฏุงุฏุงุช</span>
            </button>
        </nav>

        <footer>
            ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ Antigravity | ูุฑุตุฏ ุงูุฌูููุฑูุฉ ุงูุชููุณูุฉ
        </footer>
    </div>

    <!-- Application Logic -->
    <script src="js/calculator.js"></script>
    <script src="js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js')
                .then(() => console.log('Service Worker Registered'))
                .catch(err => console.log('SW Error:', err));
        }
    </script>
</body>

</html>
